<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Lista Clienti</title>
    <style>
      #myCli {
        position: absolute;
        white-space: pre-line;
        margin-top: 20px;
        border: 0;
        width: 100%;
        text-align: left;
      }

      div {
        border: 1px solid black;
        text-align: left;
        padding: 10px;
      }
    </style>
  </head>
  <body>
    <div id="myCli"></div>
    <button type="submit" onclick="add()">Aggiungi</button>

    <br />

    <div id="formdiv">
      <form id="myform" method="post" action="/updateCliente">
        <label>Username:<input type="text" name="username" required /></label>
        <br />
        <label>Ruolo:<input type="text" name="ruolo" required /></label>
        <br />
        <h3>NUOVI DATI</h3>
        <label
          >Username:<input type="text" name="usernameNew" required
        /></label>
        <br />
        <label>Ruolo:<input type="text" name="ruoloNew" required /></label>
        <br />

        <input type="submit" value="Modifica" />
      </form>
    </div>

    <script>
      fetch("/data/utenti.json")
        .then(function (response) {
          return response.json();
        })
        .then(function (utenti) {
          appendData(utenti);
        })
        .catch(function (err) {
          console.log("error: " + err);
        });

      function appendData(utenti) {
        var mainContainer = document.getElementById("myCli");
        for (var i = 0; i < utenti.length; i++) {
          var div = document.createElement("div");
          div.innerHTML =
            "Username: " +
            utenti[i].username +
            "\nPassword " +
            utenti[i].password +
            "\nRuolo " +
            utenti[i].ruolo +
            "\n" +
            `<button type="submit" onclick="modifica()">modifica</button>` +
            `<button type="submit" onclick="elimina()">delete</button>`;
          mainContainer.appendChild(div);
        }
      }
      function modifica() {}
      function elimina() {
        window.alert("are you sure you want to delete it?");
      }
    </script>
  </body>
</html>
